const navButton=document.querySelector(".nav__dropdown-button"),navDropdown=document.querySelector(".nav__dropdown"),navExtra=document.querySelector(".nav__extra"),phoneButton=document.querySelector(".contacts__button--phone"),mailButton=document.querySelector(".contacts__button--mail"),phoneList=document.querySelector(".contacts-list-phone"),mailList=document.querySelector(".contacts-list-mail"),phoneWrap=document.querySelector(".contacts__phone-wrap"),mailWrap=document.querySelector(".contacts__mail-wrap"),sliderBorder=document.querySelectorAll(".slider__border"),animateItems=document.querySelectorAll(".animation"),modalArea=document.querySelector(".modal"),modalWrapper=document.querySelector(".modal__wrapper"),orders=document.querySelectorAll(".order");navDropdown.addEventListener("mouseenter",(function(){navExtra.classList.remove("nav__extra--closed"),navExtra.classList.add("nav__extra--opened"),navButton.classList.add("nav__dropdown-button--opened")})),navDropdown.addEventListener("mouseleave",(function(){navExtra.classList.add("nav__extra--closed"),navExtra.classList.remove("nav__extra--opened"),navButton.classList.remove("nav__dropdown-button--opened")})),phoneWrap.addEventListener("mouseenter",(function(){phoneList.classList.remove("contacts-list-phone--closed"),phoneList.classList.add("contacts-list-phone--opened"),phoneButton.classList.add("contacts__button--phone-opened")})),phoneWrap.addEventListener("mouseleave",(function(){phoneList.classList.add("contacts-list-phone--closed"),phoneList.classList.remove("contacts-list-phone--opened"),phoneButton.classList.remove("contacts__button--phone-opened")})),mailWrap.addEventListener("mouseenter",(function(){mailList.classList.remove("contacts-list-mail--closed"),mailList.classList.add("contacts-list-mail--opened"),mailButton.classList.add("contacts__button--phone-opened")})),mailWrap.addEventListener("mouseleave",(function(){mailList.classList.add("contacts-list-mail--closed"),mailList.classList.remove("contacts-list-mail--opened"),mailButton.classList.remove("contacts__button--phone-opened")}));for(let e=0;e<orders.length;e++)orders[e].addEventListener("click",(function(e){e.preventDefault(),modalArea.classList.add("modal--open")}));function initSlider(e,t){let n=document.querySelectorAll(".slider__image"),o=0;Array.prototype.forEach.call(n,(function(e){0===o?(e.style.display="block",e.classList.add("slider__image--active")):e.style.display="none",o++})),setTimeout((function(){o=0,function e(){n=document.querySelectorAll(".slider__image"),n[o].classList.remove("slider__image--active"),setTimeout((function(){n[o].style.display="none",o++,o===n.length&&(o=0),n[o].style.display="block",setTimeout((function(){n[o].classList.add("slider__image--active")}),0)}),0),setTimeout((function(){e()}),t)}()}),t)}if(initSlider(".slider",2e3),animateItems.length>0){function animationOnScroll(){for(let e=0;e<animateItems.length;e++){const t=animateItems[e],n=t.offsetHeight,o=offset(t).top,s=8;let a=window.innerHeight-n/s;n>window.innerHeight&&(a=window.innerHeight-window.innerHeight/s),scrollY>o-a&&scrollY<o+n?t.classList.add("active"):t.classList.contains("animation-no-repeat")||t.classList.remove("active")}}function offset(e){const t=e.getBoundingClientRect(),n=window.scrollX||document.documentElement.scrollLeft,o=window.scrollY||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}window.addEventListener("scroll",animationOnScroll),setTimeout(()=>{animationOnScroll()},100)}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("error"),e.classList.add("error")}function n(e){e.parentElement.classList.remove("error"),e.classList.remove("error")}function o(e){return!/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault();let a=function(e){let s=0,a=document.querySelectorAll(".required");for(let e=0;e<a.length;e++){const l=a[e];n(l),l.classList.contains("phone")?o(l)&&(t(l),s++):""===l.value&&(t(l),s++)}return s}(),l=new FormData(e);if(0===a){modalWrapper.classList.add("sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){let n=await t.json();alert(n.message),e.reset(),modalWrapper.classList.remove("sending")}else alert("Ошибка"),modalWrapper.classList.remove("sending")}else alert("Заполните обязательные поля")}))})),modalArea.onmousedown=function(e){let t=e.target,n=modalArea.getElementsByClassName("modal__wrapper")[0];null===t.closest("."+n.className)&&this.classList.remove("modal--open")},document.addEventListener("keydown",e=>{"Escape"===e.key&&modalArea.classList.remove("modal--open")});