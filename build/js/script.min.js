const navButton=document.querySelector(".nav__dropdown-button"),navDropdown=document.querySelector(".nav__dropdown"),navExtra=document.querySelector(".nav__extra"),phoneButton=document.querySelector(".contacts__button--phone"),mailButton=document.querySelector(".contacts__button--mail"),phoneList=document.querySelector(".contacts-list-phone"),mailList=document.querySelector(".contacts-list-mail"),phoneWrap=document.querySelector(".contacts__phone-wrap"),mailWrap=document.querySelector(".contacts__mail-wrap"),sliderBorder=document.querySelectorAll(".slider__border"),animateItems=document.querySelectorAll(".animation"),modalArea=document.querySelector(".modal"),modalWrapper=document.querySelector(".modal__wrapper"),orders=document.querySelectorAll(".order"),page=document.querySelector(".page"),modalClose=document.querySelector(".modal__close"),body=document.querySelector("body");let isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};isMobile.any()?(body.classList.add("touch"),navDropdown.addEventListener("click",(function(){navExtra.classList.toggle("nav__extra--open"),navButton.classList.toggle("nav__dropdown-button--opened")}))):body.classList.add("mouse"),isMobile.any()?(body.classList.add("touch"),phoneWrap.addEventListener("click",(function(){phoneList.classList.toggle("contacts-list-phone--open"),phoneButton.classList.toggle("contacts__button--phone-opened")}))):body.classList.add("mouse");for(let e=0;e<orders.length;e++)orders[e].addEventListener("click",(function(e){e.preventDefault(),modalArea.classList.add("modal--open"),page.classList.add("page-modal")}));function initSlider(e,t){let o=document.querySelectorAll(".slider__image"),n=0;Array.prototype.forEach.call(o,(function(e){0===n?(e.style.display="block",e.classList.add("slider__image--active")):e.style.display="none",n++})),setTimeout((function(){n=0,function e(){o=document.querySelectorAll(".slider__image"),o[n].classList.remove("slider__image--active"),setTimeout((function(){o[n].style.display="none",n++,n===o.length&&(n=0),o[n].style.display="block",setTimeout((function(){o[n].classList.add("slider__image--active")}),0)}),0),setTimeout((function(){e()}),t)}()}),t)}if(initSlider(".slider",2e3),animateItems.length>0){function animationOnScroll(){for(let e=0;e<animateItems.length;e++){const t=animateItems[e],o=t.offsetHeight,n=offset(t).top,a=8;let r=window.innerHeight-o/a;o>window.innerHeight&&(r=window.innerHeight-window.innerHeight/a),scrollY>n-r&&scrollY<n+o?t.classList.add("active"):t.classList.contains("animation-no-repeat")||t.classList.remove("active")}}function offset(e){const t=e.getBoundingClientRect(),o=window.scrollX||document.documentElement.scrollLeft,n=window.scrollY||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}window.addEventListener("scroll",animationOnScroll),setTimeout(()=>{animationOnScroll()},100)}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("error"),e.classList.add("error")}function o(e){e.parentElement.classList.remove("error"),e.classList.remove("error")}function n(e){return!/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let r=function(e){let a=0,r=document.querySelectorAll(".required");for(let e=0;e<r.length;e++){const s=r[e];o(s),s.classList.contains("phone")?n(s)&&(t(s),a++):""===s.value&&(t(s),a++)}return a}(),s=new FormData(e);if(0===r){modalWrapper.classList.add("sending");let t=await fetch("sendmail.php",{method:"POST",body:s});if(t.ok){let o=await t.json();alert(o.message),e.reset(),modalWrapper.classList.remove("sending")}else alert(t.status),modalWrapper.classList.remove("sending")}else alert("Test")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("formfooter");function t(e){e.parentElement.classList.add("error"),e.classList.add("error")}function o(e){e.parentElement.classList.remove("error"),e.classList.remove("error")}function n(e){return!/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let r=function(e){let a=0,r=document.querySelectorAll(".required-footer");for(let e=0;e<r.length;e++){const s=r[e];o(s),s.classList.contains("phone")?n(s)&&(t(s),a++):""===s.value&&(t(s),a++)}return a}(),s=new FormData(e);if(0===r){let t=await fetch("sendmail.php",{method:"POST",body:s});if(t.ok){let o=await t.json();alert(o.message),e.reset()}else alert(t.status)}else alert("Test")}))})),modalArea.onmousedown=function(e){let t=e.target,o=modalArea.getElementsByClassName("modal__wrapper")[0];null===t.closest("."+o.className)&&(this.classList.remove("modal--open"),page.classList.remove("page-modal"))},document.addEventListener("keydown",e=>{"Escape"===e.key&&(modalArea.classList.remove("modal--open"),page.classList.remove("page-modal"))}),modalClose.addEventListener("click",e=>{modalArea.classList.remove("modal--open"),page.classList.remove("page-modal")});